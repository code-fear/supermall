"use strict";(self["webpackChunksupermall"]=self["webpackChunksupermall"]||[]).push([[20],{1198:function(t,e,r){r.r(e),r.d(e,{default:function(){return W}});var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"home"}},[r("nav-bar",{staticClass:"home-nav"},[r("div",{attrs:{slot:"center"},slot:"center"},[t._v("购物街")])]),r("tab-control",{directives:[{name:"show",rawName:"v-show",value:t.isTabFixed,expression:"isTabFixed"}],ref:"tabControl1",staticClass:"tab-control",attrs:{titles:["流行","新款","精选"]},on:{tabClick:t.tabClick}}),r("scroll",{ref:"scroll",staticClass:"content",attrs:{probeType:3,pullUpLoad:!0},on:{scroll:t.contentScroll,pullingUp:t.loadMore}},[r("home-swiper",{attrs:{banners:t.banners},on:{swiperImageLoad:t.swiperImageLoad}}),r("recommend-view",{attrs:{recommends:t.recommends}}),r("feature-view"),r("tab-control",{ref:"tabControl2",attrs:{titles:["流行","新款","精选"]},on:{tabClick:t.tabClick}}),r("goods-list",{attrs:{goods:t.showGoods}})],1),r("back-top",{directives:[{name:"show",rawName:"v-show",value:t.isShowBackTop,expression:"isShowBackTop"}],nativeOn:{click:function(e){return t.backClick.apply(null,arguments)}}})],1)},o=[];function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function a(t){if(Array.isArray(t))return s(t)}r(2526),r(1817),r(1539),r(2165),r(8783),r(3948),r(1038);function i(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}r(7042),r(8309),r(4916),r(7601);function l(t,e){if(t){if("string"===typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}r(1703);function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t){return a(t)||i(t)||l(t)||c()}var m=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("swiper",{staticClass:"swiper"},t._l(t.banners,(function(e,n){return r("swiper-item",{key:n},[r("a",{attrs:{href:e.link}},[r("img",{attrs:{src:e.image},on:{load:t.imageLoad}})])])})),1)},d=[],f=r(2594),p={name:"HomeSwiper",props:{banners:{type:Array,default:function(){return[]}}},data:function(){return{isLoad:!1}},methods:{imageLoad:function(){this.isLoad||(this.$emit("swiperImageLoad"),this.isLoad=!0)}},components:{Swiper:f.k,SwiperItem:f.t}},h=p,b=r(1001),g=(0,b.Z)(h,m,d,!1,null,null,null),v=g.exports,w=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"recommend"},t._l(t.recommends,(function(e){return r("div",{key:e.acm,staticClass:"recommend-item"},[r("a",{attrs:{href:e.link}},[r("img",{attrs:{src:e.image}}),r("div",[t._v(t._s(e.title))])])])})),0)},y=[],k={name:"RecommendView",props:{recommends:{type:Array,defaut:function(){return[]}}}},C=k,T=(0,b.Z)(C,w,y,!1,null,null,null),_=T.exports,x=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},$=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"feature"},[n("a",{attrs:{href:"https://act.mogujie.com/zzlx67"}},[n("img",{attrs:{src:r(8775),alt:""}})])])}],S={},I=S,L=(0,b.Z)(I,x,$,!1,null,null,null),A=L.exports,G=r(3558),Z=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"tab-control"},t._l(t.titles,(function(e,n){return r("div",{key:e,staticClass:"tab-control-item",class:{active:n===t.currentIndex},on:{click:function(e){return t.itemClick(n)}}},[r("span",[t._v(" "+t._s(e)+" ")])])})),0)},E=[],H={name:"TabControl",props:{titles:{type:Array,default:function(){return[]}}},data:function(){return{currentIndex:0}},methods:{itemClick:function(t){this.currentIndex=t,this.$emit("tabClick",t)}}},O=H,j=(0,b.Z)(O,Z,E,!1,null,null,null),F=j.exports,B=r(80),U=r(7592);function Y(){return(0,U.W)({url:"/home/multidata"})}function M(t,e){return(0,U.W)({url:"/home/data",params:{type:t,page:e}})}var N=r(1691),V=r(7639),z={components:{HomeSwiper:v,RecommendView:_,FeatureView:A,NavBar:G.Z,TabControl:F,GoodsList:B.Z,Scroll:N.Z},data:function(){return{banners:[],recommends:[],goods:{pop:{page:0,list:[]},new:{page:0,list:[]},sell:{page:0,list:[]}},currentType:"pop",tabOffsetTop:0,isTabFixed:!1,saveY:0,itemImgListener:null}},created:function(){this.getSData(),this.getHomeGoods("pop"),this.getHomeGoods("new"),this.getHomeGoods("sell")},mixins:[V.x,V.s],mounted:function(){},computed:{showGoods:function(){return this.goods[this.currentType].list}},destroyed:function(){console.log("home destroyed")},activated:function(){this.$refs.scroll.scrollTo(0,this.saveY,0),this.$refs.scroll.refresh()},deactivated:function(){this.saveY=this.$refs.scroll.getScrollY(),this.$bus.$off("itemImageLoad",this.itemImgListener)},methods:{tabClick:function(t){switch(t){case 0:this.currentType="pop";break;case 1:this.currentType="new";break;case 2:this.currentType="sell";break}this.$refs.tabControl1.currentIndex=t,this.$refs.tabControl2.currentIndex=t},contentScroll:function(t){this.isShowBackTop=-t.y>3e3,this.isTabFixed=-t.y>this.tabOffsetTop},loadMore:function(){this.getHomeGoods(this.currentType)},swiperImageLoad:function(){this.tabOffsetTop=this.$refs.tabControl2.$el.offsetTop},getSData:function(){var t=this;Y().then((function(e){t.banners=e.data.data.banner.list,t.recommends=e.data.data.recommend.list}))},getHomeGoods:function(t){var e=this,r=this.goods[t].page+1;M(t,r).then((function(r){var n;(n=e.goods[t].list).push.apply(n,u(r.data.data.list)),e.goods[t].page+=1,e.$refs.scroll.finishPullUp()}))}}},D=z,R=(0,b.Z)(D,n,o,!1,null,"1e3790e4",null),W=R.exports},8775:function(t,e,r){t.exports=r.p+"img/recommend_bg.a1646d5d.jpg"}}]);
//# sourceMappingURL=20-legacy.5c0dd155.js.map